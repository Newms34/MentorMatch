<div ng-controller='mod-cont'>
    <div class="message">
        <div class="message-header">Moderator Controls</div>
        <div class="message-body"><table class="table is-fullwidth">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Username (if different)</th>
                        <th>Ban Status</th>
                        <th>Skills</th>
                        <th>Currently Mentoring</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat='u in allUsrs'>
                        <td><i class="fa fa-lock" ng-if='u.mod' title='This user is a moderator'>&nbsp;</i>{{u.displayName||u.user}}</td>
                        <td>{{u.displayName && u.user!=u.displayName?u.user:'(same)'}}</td>
                        <td>{{u.isBanned?'Banned':'Not banned'}}</td>
                        <td>SKILLS (interests) STUFF</td>
                        <td>
                            <div class="is-fullwidth has-text-grey" ng-if='!u.teaching.length'>
                                (This user is not currently mentoring anyone)
                            </div>
                            <table class='table is-bordered' ng-if='u.teaching.length'>
                                <thead>
                                    <tr>
                                        <th>Student Name</th>
                                        <th>Skills</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat='st in u.teaching'>
                                        <td>{{st.user.displayName||st.user.user}}</td>
                                        <td>
                                            <div>
                                                <ul class="check-list">
                                                    <li ng-repeat='t in st.topics'>{{t}}</li>
                                                </ul>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </td>
                        <td>
                            <button class="button is-info" title='Message this user'><i class="fa fa-envelope"></i></button>
                            <button class="button is-somewhat-dangerous" ng-click='toggleBan(u)' ng-if='!u.mod && !u.isBanned' title='Ban this user'><i class="fa fa-lock"></i></button>
                            <button class="button is-success" ng-click='toggleBan(u)' ng-if='!u.mod && u.isBanned' title='Unban this user'><i class="fa fa-unlock"></i></button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>